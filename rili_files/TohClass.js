var Toh=(function(){var _date,_temp,_page=1,_again=false,_n=0,_server=['http://lssdjt.com','http://www.lssdjt.com'],_datadir,_fantidir,_dedug=false,_date=new Date(),_month,_day,_js=false,config={'ys':'1.htm','w':'600','h':'20','bky':'dotted','bks':'0','bkc':'red','fs':'14','fc':'DimGray','bgc':'','bgcolor':'','hg':'20','ie':'0','xhx':'none','sd':'200','px':'1','len':'100','sk':'1','n':'40','m':_date.getMonth()+1,'d':_date.getDate()},w=window,d=w.document,_$=function(id){return d.getElementById(id)},getPost=function(){var re=/([^\?&]+)=([^&]*)/g,post=[];if(_js){for(var i=0,ci;ci=document.getElementsByTagName('script')[i++];){if(/(w|h)/.test(ci.src)){while(arr=re.exec(ci.src)){post[arr[1]]=arr[2]}}}}else{while(arr=re.exec(location.href)){post[arr[1]]=arr[2]}};return post},setStyle=function(a){var b=d.createElement("style");b.type="text/css";try{b.appendChild(d.createTextNode(a))}catch(ex){b.styleSheet.cssText=a}d.getElementsByTagName("head")[0].appendChild(b)},load=function(f){var h=d.getElementsByTagName('HEAD').item(0);var s=d.createElement('SCRIPT');s.src=f;s.type="text/javascript";s.charset="utf-8";h.appendChild(s)},format=function(a,b){if(arguments.length>1){var d=format,c=/([.*+?^=!:${}()|[\]\/\\])/g,e=(d.left_delimiter||"/*").replace(c,"\\$1"),f=(d.right_delimiter||"*/").replace(c,"\\$1"),c=d._r1||(d._r1=RegExp(e+"([^"+e+f+"]+)"+f,"g")),d=d._r2||(d._r2=RegExp(e+"(\\d+)"+f,"g"));if(typeof b=="object")return a.replace(c,function(a,c){var d=b[c];typeof d=="function"&&(d=d(c));return typeof d=="undefined"?"":d});else if(typeof b!="undefined"){var g=Array.prototype.slice.call(arguments,1),j=g.length;return a.replace(d,function(a,c){c=parseInt(c,10);return c>=j?a:g[c]})}}return a},template=template||function(str){var _analyze=function(text){return text.replace(/{\#(\s|\S)*?\#}/g,function(s){return s.replace(/("|\\)/g,"\\$1").replace("{#",'_s.push("').replace("#}",'");').replace(/<\%([\s\S]*?)\%>/g,'",$1,"').replace(/\r\n|\n/g,"\\r\\n")})};var _temp="var _s=[];"+_analyze(str)+" return _s;";return{render:function(mapping){var _a=[],_v=[],i;for(i in mapping){_a.push(i);_v.push(mapping[i])}return(new Function(_a,_temp)).apply(null,_v).join("")}}},sort=function(){var compare=function(pName){return function(o1,o2){var v1=o1[pName],v2=o2[pName];if(v1<v2){return-1}else if(v1>v2){return 1}else{return 0}}};var px=config['px'];var vName='year';if(px==3||px==4)vName='hits';if(px!=1)datalist.sort(compare(vName));if(px==2||px==3)datalist.reverse()},get=function(callback){_again=true;if(_dedug)alert('_again:true');sort();if(config['bgc'].length>0)config['bgcolor']='background-color:'+config['bgc']+';';setStyle(format(_$("t1").innerHTML,config));_$("show").innerHTML=template(format(_$("t2").innerHTML,config)).render({});if(config['ie']=='1'){if(_dedug)alert('_fantidir:'+_fantidir);load(_fantidir)};if(callback&&typeof callback=='function'){callback(config)}else if(callback){eval(callback)};Cookie.set('_n',_n)},set=function(opt){if(!opt)var opt={};_js=opt.ys.indexOf('.js')>0?true:false;var post=getPost();for(var i in config){for(var j in opt){if(i==j){config[i]=opt[j]}};config[i]=post[i]?post[i]:config[i]}},init=function(opt){if(Cookie.get('_n')!=null){_n=Cookie.get('_n');Cookie.clear('_n')};if(!opt)var opt={};_dedug=opt.dedug?opt.dedug:false;var post=getPost();_month=post['m']?post['m']:config['m'];_day=post['d']?post['d']:config['d'];_datadir=opt.datadir?opt.datadir:null;if(_datadir==null){_datadir=_server[_n]+'/code/data/'+_month+'/'+_day+'/'}else{if(!new RegExp(/\d{1,2}\/\d{1,2}[/]{0,1}$/gi).test(_datadir))_datadir=_datadir+'/'+_month+'/'+_day+'/index.htm'}_fantidir=opt.fantidir?opt.fantidir:null;if(_fantidir==null)_fantidir=_server[_n]+'/code/js/fanti.js';var _show=opt.idshow?parseInt(opt.idshow):0;if(_dedug)alert("_show:"+_show);if(_show){setStyle(".loadwin{width:"+config['w']+"px;height:"+config['h']+"px;}");setStyle(".load{z-index:654;font-size:13px;position:absolute;top:"+((config['h']<30)?'0':parseInt(config['h'])/2)+"px;left:"+((config['w']<100)?'0':(parseInt(config['w'])/2-50))+"px;width:100px;color:"+config['fc']+"}");_$("show").innerHTML="<div class=loadwin><div class=load>加载中,请稍后..."+(_dedug?'<BR>'+_server[_n]:'')+"</div></div>"};if(_dedug)alert('datadir:'+_datadir);load(_datadir);var _time=opt.time?parseInt(opt.time,10):3000;setTimeout(function(){if(!_again){_n+=1;if(_n>=_server.length){if(opt.datadir?opt.datadir:null!=null)alert("您已设置了数据本地化，但无法获取本地数据包，请检查：\n\n①数据包是否下载到调用文件目录下。\n\n②检查Toh.init({datadir:'路径'});中的'路径="+opt.datadir+"'设置是否正确！");document.location.reload()};init(opt)}},_time)};return{get:get,set:set,init:init}})();var Cookie={set:function(a,b,d,c,e){typeof d=="undefined"&&(d=new Date((new Date).getTime()+1000*3600*24*365));document.cookie=a+"="+escape(b)+(d?"; expires="+d.toGMTString():"")+(c?";path="+c:";path=/")+(e?";domain="+e:"")},get:function(a){a=document.cookie.match(RegExp("(^| )"+a+"=([^;]*)(;|$)"));if(a!=null)return unescape(a[2]);return null},clear:function(a,b,d){if(this.get(a))document.cookie=a+"="+(b?";path="+b:";path=/")+(d?"; domain="+d:"")+";expires=Fri, 02-Jan-1970 00:00:00 GMT"}};